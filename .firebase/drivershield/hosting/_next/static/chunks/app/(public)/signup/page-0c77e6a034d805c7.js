(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887,700],{2416:function(e,t,r){Promise.resolve().then(r.bind(r,2701))},7138:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var n=r(231),i=r.n(n)},2701:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(7437),i=r(9343),a=r(1014),s=r(9733),o=r(8185),l=r(3363),d=r(7209),c=r(4541),u=r(9162),f=r(7786),m=r(7138),p=r(3751),h=r(8087),g=r(2265);r(4887);var x=r(1538),b=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,x.Z8)(`Primitive.${t}`),i=g.forwardRef((e,i)=>{let{asChild:a,...s}=e,o=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(o,{...s,ref:i})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),v="horizontal",y=["horizontal","vertical"],j=g.forwardRef((e,t)=>{let{decorative:r,orientation:i=v,...a}=e,s=y.includes(i)?i:v;return(0,n.jsx)(b.div,{"data-orientation":s,...r?{role:"none"}:{"aria-orientation":"vertical"===s?s:void 0,role:"separator"},...a,ref:t})});j.displayName="Separator";var w=r(9354);let N=g.forwardRef((e,t)=>{let{className:r,orientation:i="horizontal",decorative:a=!0,...s}=e;return(0,n.jsx)(j,{ref:t,decorative:a,orientation:i,className:(0,w.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",r),...s})});N.displayName=j.displayName;var k=r(6763),I=r(6463);function S(){let{signup:e}=(0,f.a)(),{t}=(0,p.Z)(),{toast:r}=(0,k.pm)(),x=(0,I.useRouter)(),[b,v]=(0,g.useState)(!1),y=(0,i.cI)({resolver:(0,a.F)(u.fb),defaultValues:{email:"",password:"",confirmPassword:"",companyName:"",companyCode:"",vatCode:"",address:"",contactPerson:"",phone:"",agreeToTerms:!1}}),j=async n=>{v(!0);try{await e(n),r({title:t("toast.signup.success.title"),description:t("toast.signup.success.description")}),x.push("/activation-pending")}catch(n){console.error("[SIGNUP] Error:",n);let e=n.message||t("toast.signup.error.descriptionGeneric");if(n.code)switch(n.code){case"auth/email-already-in-use":e=t("toast.signup.error.emailExists");break;case"auth/weak-password":e=t("toast.signup.error.weakPassword");break;case"auth/invalid-email":e=t("toast.signup.error.invalidEmail")}r({variant:"destructive",title:t("toast.signup.error.title"),description:e})}finally{v(!1)}};return(0,n.jsxs)(o.Zb,{className:"w-full max-w-lg",children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsx)(o.ll,{className:"text-2xl",children:t("signup.title")}),(0,n.jsx)(o.SZ,{children:t("signup.description_short")})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)(l.l0,{...y,children:(0,n.jsxs)("form",{onSubmit:y.handleSubmit(j),className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(l.Wi,{control:y.control,name:"companyName",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{children:[(0,n.jsx)(l.lX,{children:t("signup.form.companyName.label")}),(0,n.jsx)(l.NI,{children:(0,n.jsx)(d.I,{placeholder:t("signup.form.companyName.placeholder"),...r})}),(0,n.jsx)(l.zG,{})]})}}),(0,n.jsx)(l.Wi,{control:y.control,name:"companyCode",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{children:[(0,n.jsx)(l.lX,{children:t("signup.form.companyCode.label")}),(0,n.jsx)(l.NI,{children:(0,n.jsx)(d.I,{placeholder:t("signup.form.companyCode.placeholder"),...r})}),(0,n.jsx)(l.zG,{})]})}})]}),(0,n.jsx)(l.Wi,{control:y.control,name:"vatCode",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{children:[(0,n.jsx)(l.lX,{children:t("signup.form.vatCode.label")}),(0,n.jsx)(l.NI,{children:(0,n.jsx)(d.I,{placeholder:t("signup.form.vatCode.placeholder"),...r})}),(0,n.jsx)(l.zG,{})]})}}),(0,n.jsx)(l.Wi,{control:y.control,name:"address",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{children:[(0,n.jsx)(l.lX,{children:t("signup.form.address.label")}),(0,n.jsx)(l.NI,{children:(0,n.jsx)(d.I,{placeholder:t("signup.form.address.placeholder"),...r})}),(0,n.jsx)(l.zG,{})]})}}),(0,n.jsx)(N,{className:"my-6"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(l.Wi,{control:y.control,name:"contactPerson",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{children:[(0,n.jsx)(l.lX,{children:t("signup.form.contactPerson.label")}),(0,n.jsx)(l.NI,{children:(0,n.jsx)(d.I,{placeholder:t("signup.form.contactPerson.placeholder"),...r})}),(0,n.jsx)(l.zG,{})]})}}),(0,n.jsx)(l.Wi,{control:y.control,name:"phone",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{children:[(0,n.jsx)(l.lX,{children:t("signup.form.phone.label")}),(0,n.jsx)(l.NI,{children:(0,n.jsx)(d.I,{placeholder:t("signup.form.phone.placeholder"),...r})}),(0,n.jsx)(l.zG,{})]})}})]}),(0,n.jsx)(l.Wi,{control:y.control,name:"email",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{children:[(0,n.jsx)(l.lX,{children:t("signup.form.email.label")}),(0,n.jsx)(l.NI,{children:(0,n.jsx)(d.I,{placeholder:t("signup.form.email.placeholder"),...r})}),(0,n.jsx)(l.zG,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(l.Wi,{control:y.control,name:"password",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{children:[(0,n.jsx)(l.lX,{children:t("signup.form.password.label")}),(0,n.jsx)(l.NI,{children:(0,n.jsx)(d.I,{type:"password",placeholder:t("signup.form.password.placeholder"),...r})}),(0,n.jsx)(l.zG,{})]})}}),(0,n.jsx)(l.Wi,{control:y.control,name:"confirmPassword",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{children:[(0,n.jsx)(l.lX,{children:t("signup.form.confirmPassword.label")}),(0,n.jsx)(l.NI,{children:(0,n.jsx)(d.I,{type:"password",placeholder:t("signup.form.confirmPassword.placeholder"),...r})}),(0,n.jsx)(l.zG,{})]})}})]}),(0,n.jsx)(l.Wi,{control:y.control,name:"agreeToTerms",render:e=>{let{field:r}=e;return(0,n.jsxs)(l.xJ,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[(0,n.jsx)(l.NI,{children:(0,n.jsx)(c.X,{checked:r.value,onCheckedChange:r.onChange})}),(0,n.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,n.jsxs)(l.lX,{children:[t("signup.form.agreeToTerms.labelPart1"),(0,n.jsx)(m.default,{href:"/terms",target:"_blank",className:"underline hover:text-primary",children:t("signup.form.agreeToTerms.linkText")})]}),(0,n.jsx)(l.zG,{})]})]})}}),(0,n.jsxs)(s.z,{type:"submit",className:"w-full",disabled:b,children:[b?(0,n.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}):null,t("signup.form.submitButton")]})]})}),(0,n.jsxs)("div",{className:"mt-4 text-center text-sm",children:[t("signup.form.alreadyHaveAccount"),(0,n.jsx)(m.default,{href:"/login",className:"underline",children:t("signup.form.loginLink")})]})]})]})}},9733:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return d}});var n=r(7437),i=r(2265),a=r(1538),s=r(3027),o=r(9354);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:r,variant:i,size:s,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:i,size:s,className:r})),ref:t,...c})});d.displayName="Button"},8185:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return s},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var n=r(7437),i=r(2265),a=r(9354);let s=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...i})});s.displayName="Card";let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...i})});o.displayName="CardHeader";let l=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...i})});l.displayName="CardTitle";let d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...i})});d.displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...i})});c.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...i})});u.displayName="CardFooter"},4541:function(e,t,r){"use strict";r.d(t,{X:function(){return l}});var n=r(7437),i=r(2265),a=r(9324),s=r(926),o=r(9354);let l=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...i,children:(0,n.jsx)(a.z$,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(s.Z,{className:"h-4 w-4"})})})});l.displayName=a.fC.displayName},3363:function(e,t,r){"use strict";r.d(t,{NI:function(){return g},Wi:function(){return u},l0:function(){return d},lX:function(){return h},pf:function(){return x},xJ:function(){return p},zG:function(){return b}});var n=r(7437),i=r(2265),a=r(1538),s=r(9343),o=r(9354),l=r(402);let d=s.RV,c=i.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(c.Provider,{value:{name:t.name},children:(0,n.jsx)(s.Qr,{...t})})},f=()=>{let e=i.useContext(c),t=i.useContext(m),{getFieldState:r,formState:n}=(0,s.Gc)(),a=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...a}},m=i.createContext({}),p=i.forwardRef((e,t)=>{let{className:r,...a}=e,s=i.useId();return(0,n.jsx)(m.Provider,{value:{id:s},children:(0,n.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...a})})});p.displayName="FormItem";let h=i.forwardRef((e,t)=>{let{className:r,...i}=e,{error:a,formItemId:s}=f();return(0,n.jsx)(l._,{ref:t,className:(0,o.cn)(a&&"text-destructive",r),htmlFor:s,...i})});h.displayName="FormLabel";let g=i.forwardRef((e,t)=>{let{...r}=e,{error:i,formItemId:s,formDescriptionId:o,formMessageId:l}=f();return(0,n.jsx)(a.g7,{ref:t,id:s,"aria-describedby":i?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!i,...r})});g.displayName="FormControl";let x=i.forwardRef((e,t)=>{let{className:r,...i}=e,{formDescriptionId:a}=f();return(0,n.jsx)("p",{ref:t,id:a,className:(0,o.cn)("text-sm text-muted-foreground",r),...i})});x.displayName="FormDescription";let b=i.forwardRef((e,t)=>{var r;let{className:i,children:a,...s}=e,{error:l,formMessageId:d}=f(),c=l?String(null!==(r=null==l?void 0:l.message)&&void 0!==r?r:""):a;return c?(0,n.jsx)("p",{ref:t,id:d,className:(0,o.cn)("text-sm font-medium text-destructive",i),...s,children:c}):null});b.displayName="FormMessage"},7209:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(7437),i=r(2265),a=r(9354);let s=i.forwardRef((e,t)=>{let{className:r,type:i,...s}=e;return(0,n.jsx)("input",{type:i,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});s.displayName="Input"},402:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var n=r(7437),i=r(2265),a=r(8837),s=r(3027),o=r(9354);let l=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,o.cn)(l(),r),...i})});d.displayName=a.f.displayName},7786:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return m},a:function(){return p}});var n=r(7437),i=r(2265),a=r(9506),s=r(5735),o=r(9842),l=r(2874),d=r(6763),c=r(6463),u=r(8087);let f=(0,i.createContext)(void 0),m=e=>{let{children:t}=e,[r,m]=(0,i.useState)(null),[p,h]=(0,i.useState)(!0),{toast:g}=(0,d.pm)(),x=(0,c.useRouter)();(0,i.useEffect)(()=>{let e=(0,s.Aj)(a.I8,async e=>{if(h(!0),e)try{await new Promise(e=>setTimeout(e,50));let t=await l.GA(e.uid);t?m(t):(console.warn("No Firestore profile found for authenticated user:",e.uid),await (0,s.w7)(a.I8),m(null))}catch(e){console.error("Error fetching user profile:",e),m(null)}else m(null);h(!1)});return()=>e()},[]);let b=async e=>{try{return(await (0,s.e5)(a.I8,e.email,e.password)).user}catch(e){throw console.error("Login failed:",e),g({title:"Prisijungimo klaida",description:e.message||"Patikrinkite el. paštą ir slaptažodį.",variant:"destructive"}),e}},v=async e=>{try{let t=(await (0,s.Xb)(a.I8,e.email,e.password)).user,r={email:e.email,companyName:e.companyName,companyCode:e.companyCode,vatCode:e.vatCode||"",address:e.address,contactPerson:e.contactPerson,phone:e.phone,paymentStatus:"pending_verification",isAdmin:!1,agreeToTerms:e.agreeToTerms,subUsers:[],registeredAt:(0,o.Bt)(),accountActivatedAt:null};await (0,o.pl)((0,o.JU)(a.db,"users",t.uid),r)}catch(e){throw console.error("Signup failed:",e),g({title:"Registracijos klaida",description:e.message||"Nepavyko užregistruoti vartotojo.",variant:"destructive"}),e}},y=async()=>{await (0,s.w7)(a.I8),m(null),x.push("/login")},j=async e=>{if(r)try{await l.Lj(r.id,e);let t={...r,...e};m(t)}catch(e){throw console.error("Failed to update user context and Firestore:",e),g({title:"Atnaujinimo klaida",description:"Nepavyko išsaugoti pakeitimų serveryje.",variant:"destructive"}),e}};return p?(0,n.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:(0,n.jsx)(u.Z,{className:"h-12 w-12 animate-spin text-primary"})}):(0,n.jsx)(f.Provider,{value:{user:r,loading:p,login:b,signup:v,logout:y,updateUserInContext:j},children:t})},p=()=>{let e=(0,i.useContext)(f);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6763:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(2265);let i=0,a=new Map,s=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?s(r):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(d);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9506:function(e,t,r){"use strict";let n,i;r.d(t,{I8:function(){return c},db:function(){return i},tO:function(){return u}});var a=r(5236),s=r(5735),o=r(9842),l=r(9854);let d="drivercheck";(0,a.C6)().length?(n=(0,a.Mq)(),i=(0,o.ad)(n,d)):(n=(0,a.ZF)({apiKey:"AIzaSyBusklRtrpm-gfnwCdmi2yj5vTumqLte3c",authDomain:"drivershield.firebaseapp.com",projectId:"drivershield",storageBucket:"drivershield.appspot.com",messagingSenderId:"688007961476",appId:"1:688007961476:web:0bf3aa76adba59f7781bd1",measurementId:"G-BKJYEF2X6Y"}),i=(0,o.LV)(n,{experimentalForceLongPolling:!0,localCache:{kind:"memory"}},d));let c=(0,s.v0)(n),u=(0,l.cF)(n)},9162:function(e,t,r){"use strict";r.d(t,{Hi:function(){return o},ZO:function(){return s},fb:function(){return i},pj:function(){return a}});var n=r(537);let i=n.Ry({email:n.Z_().email({message:"Neteisingas el. pašto formatas."}),password:n.Z_().min(8,{message:"Slaptažodis turi būti bent 8 simbolių ilgio."}),confirmPassword:n.Z_().min(8,{message:"Slaptažodis turi būti bent 8 simbolių ilgio."}),companyName:n.Z_().min(2,{message:"Įmonės pavadinimas turi būti bent 2 simbolių ilgio."}),companyCode:n.Z_().regex(/^\d{9}$/,{message:"Įmonės kodas turi būti 9 skaitmenys."}),vatCode:n.Z_().optional(),address:n.Z_().min(5,{message:"Adresas turi būti bent 5 simbolių ilgio."}),contactPerson:n.Z_().min(3,{message:"Kontaktinis asmuo turi būti bent 3 simbolių ilgio."}),phone:n.Z_().regex(/^\+?\d{7,15}$/,{message:"Neteisingas telefono numerio formatas."}),agreeToTerms:n.O7().refine(e=>!0===e,{message:"Privalote sutikti su taisyklėmis."})}).refine(e=>e.password===e.confirmPassword,{message:"Slaptažodžiai nesutampa.",path:["confirmPassword"]}),a=n.Ry({email:n.Z_().email({message:"Neteisingas el. pašto formatas."}),password:n.Z_().min(1,{message:"Slaptažodis yra privalomas."})}),s=n.Ry({fullName:n.Z_().min(3,{message:"Vardas ir pavardė turi būti bent 3 simbolių ilgio."}),nationality:n.Z_().optional(),birthYear:n.Rx().int().min(1900).max(new Date().getFullYear()).optional().or(n.i0("")),category:n.Z_().min(1,{message:"Pagrindinė kategorija yra privaloma."}),tags:n.IX(n.Z_()).optional(),comment:n.Z_().min(10,{message:"Komentaras turi būti bent 10 simbolių ilgio."}),image:n.Yj().optional()}),o=n.Ry({query:n.Z_().min(3,{message:"Paieškos frazė turi būti bent 3 simbolių ilgio."})})},2874:function(e,t,r){"use strict";r.d(t,{A5:function(){return m},AW:function(){return l},FA:function(){return x},GA:function(){return c},I1:function(){return u},KO:function(){return b},Lj:function(){return d},cq:function(){return f},hi:function(){return g},oK:function(){return h},tE:function(){return v},w2:function(){return p}});var n=r(9506),i=r(9842),a=r(9854);let s=e=>e&&"function"==typeof e.toDate,o=e=>{let t={...e},r={id:t.id};for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e)){let n=t[e];s(n)?r[e]=n.toDate().toISOString():r[e]=n}return r};async function l(){let e=(0,i.hJ)(n.db,"users");return(await (0,i.PL)(e)).docs.map(e=>o({id:e.id,...e.data()}))}async function d(e,t){let r=(0,i.JU)(n.db,"users",e);await (0,i.r7)(r,t)}async function c(e){let t=(0,i.JU)(n.db,"users",e),r=await (0,i.QT)(t);return r.exists()?o({id:r.id,...r.data()}):null}async function u(){let e=(0,i.hJ)(n.db,"reports"),t=(0,i.IO)(e,(0,i.Xo)("createdAt","desc"));return(await (0,i.PL)(t)).docs.map(e=>o({id:e.id,...e.data()}))}async function f(e){let t=(0,i.hJ)(n.db,"reports"),r={...e,createdAt:(0,i.Bt)(),deletedAt:null};await (0,i.ET)(t,r)}async function m(e){let t=(0,i.JU)(n.db,"reports",e);await (0,i.r7)(t,{deletedAt:(0,i.Bt)()})}async function p(e){let t=(0,i.IO)((0,i.hJ)(n.db,"reports"),(0,i.ar)("reporterId","==",e),(0,i.Xo)("createdAt","desc")),r=(await (0,i.PL)(t)).docs.map(e=>o({id:e.id,...e.data()}));return{active:r.filter(e=>!e.deletedAt),deleted:r.filter(e=>!!e.deletedAt)}}async function h(e){if(!e)return[];let t=(0,i.IO)((0,i.hJ)(n.db,"searchLogs"),(0,i.ar)("userId","==",e),(0,i.Xo)("timestamp","desc"),(0,i.b9)(50));return(await (0,i.PL)(t)).docs.map(e=>o({id:e.id,...e.data()}))}async function g(e){let t={...e,timestamp:(0,i.Bt)()};await (0,i.ET)((0,i.hJ)(n.db,"searchLogs"),t)}async function x(){let e=(0,i.IO)((0,i.hJ)(n.db,"auditLogs"),(0,i.Xo)("timestamp","desc"),(0,i.b9)(100));return(await (0,i.PL)(e)).docs.map(e=>o({id:e.id,...e.data()}))}async function b(e){let t={...e,timestamp:(0,i.Bt)()};await (0,i.ET)((0,i.hJ)(n.db,"auditLogs"),t)}async function v(e){let t="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),r=e.name.split(".").pop(),i=(0,a.iH)(n.tO,"reports/".concat(t,".").concat(r));return await (0,a.KV)(i,e),{url:await (0,a.Jt)(i),dataAiHint:e.name.split(".")[0].replace(/[^a-zA-Z\s]/g,"").substring(0,20)||"document scan"}}},9324:function(e,t,r){"use strict";r.d(t,{fC:function(){return j},z$:function(){return N}});var n=r(2265),i=r(1584),a=r(8324),s=r(8149),o=r(1715),l=r(7250),d=r(5238),c=r(1383),u=r(8676),f=r(7437),m="Checkbox",[p,h]=(0,a.b)(m),[g,x]=p(m);function b(e){let{__scopeCheckbox:t,checked:r,children:i,defaultChecked:a,disabled:s,form:l,name:d,onCheckedChange:c,required:u,value:p="on",internal_do_not_use_render:h}=e,[x,b]=(0,o.T)({prop:r,defaultProp:null!=a&&a,onChange:c,caller:m}),[v,y]=n.useState(null),[j,w]=n.useState(null),N=n.useRef(!1),k=!v||!!l||!!v.closest("form"),I={checked:x,disabled:s,setChecked:b,control:v,setControl:y,name:d,form:l,value:p,hasConsumerStoppedPropagationRef:N,required:u,defaultChecked:!S(a)&&a,isFormControl:k,bubbleInput:j,setBubbleInput:w};return(0,f.jsx)(g,{scope:t,...I,children:"function"==typeof h?h(I):i})}var v="CheckboxTrigger",y=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,onKeyDown:a,onClick:o,...l}=e,{control:d,value:c,disabled:m,checked:p,required:h,setControl:g,setChecked:b,hasConsumerStoppedPropagationRef:y,isFormControl:j,bubbleInput:w}=x(v,r),N=(0,i.e)(t,g),k=n.useRef(p);return n.useEffect(()=>{let e=null==d?void 0:d.form;if(e){let t=()=>b(k.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,b]),(0,f.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":S(p)?"mixed":p,"aria-required":h,"data-state":C(p),"data-disabled":m?"":void 0,disabled:m,value:c,...l,ref:N,onKeyDown:(0,s.Mj)(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,s.Mj)(o,e=>{b(e=>!!S(e)||!e),w&&j&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})});y.displayName=v;var j=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:n,checked:i,defaultChecked:a,required:s,disabled:o,value:l,onCheckedChange:d,form:c,...u}=e;return(0,f.jsx)(b,{__scopeCheckbox:r,checked:i,defaultChecked:a,disabled:o,required:s,onCheckedChange:d,name:n,form:c,value:l,internal_do_not_use_render:e=>{let{isFormControl:n}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(y,{...u,ref:t,__scopeCheckbox:r}),n&&(0,f.jsx)(I,{__scopeCheckbox:r})]})}})});j.displayName=m;var w="CheckboxIndicator",N=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...i}=e,a=x(w,r);return(0,f.jsx)(c.z,{present:n||S(a.checked)||!0===a.checked,children:(0,f.jsx)(u.WV.span,{"data-state":C(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});N.displayName=w;var k="CheckboxBubbleInput",I=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,...a}=e,{control:s,hasConsumerStoppedPropagationRef:o,checked:c,defaultChecked:m,required:p,disabled:h,name:g,value:b,form:v,bubbleInput:y,setBubbleInput:j}=x(k,r),w=(0,i.e)(t,j),N=(0,l.D)(c),I=(0,d.t)(s);n.useEffect(()=>{if(!y)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!o.current;if(N!==c&&e){let r=new Event("click",{bubbles:t});y.indeterminate=S(c),e.call(y,!S(c)&&c),y.dispatchEvent(r)}},[y,N,c,o]);let C=n.useRef(!S(c)&&c);return(0,f.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=m?m:C.current,required:p,disabled:h,name:g,value:b,form:v,...a,tabIndex:-1,ref:w,style:{...a.style,...I,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function S(e){return"indeterminate"===e}function C(e){return S(e)?"indeterminate":e?"checked":"unchecked"}I.displayName=k},7250:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(2265);function i(e){let t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},5238:function(e,t,r){"use strict";r.d(t,{t:function(){return a}});var n=r(2265),i=r(1336);function a(e){let[t,r]=n.useState(void 0);return(0,i.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}},926:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(6497).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])}},function(e){e.O(0,[4358,139,6900,4623,231,1490,3318,9354,3751,2971,7023,1744],function(){return e(e.s=2416)}),_N_E=e.O()}]);