(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4886,700],{5126:function(t,e,r){Promise.resolve().then(r.bind(r,6591))},6591:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return o}});var n=r(7437),i=r(7786),a=r(9733);function o(){let{logout:t}=(0,i.a)();return(0,n.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,n.jsxs)("div",{className:"max-w-xl rounded-xl border bg-card p-8 shadow-xl text-center",children:[(0,n.jsx)("h1",{className:"mb-4 text-3xl font-bold",children:"Paskyra sukurta, laukiama aktyvavimo"}),(0,n.jsx)("p",{className:"text-muted-foreground text-center mb-6",children:"Jūsų paskyra sėkmingai užregistruota. Mūsų komanda patikrins informaciją ir aktyvuos prieigą po apmokėjimo. Apie aktyvavimą būsite informuoti el. paštu."}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 mt-8 border-t pt-6",children:[(0,n.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Jei norite prisijungti su kita paskyra (pvz. administratoriaus) – atsijunkite žemiau."}),(0,n.jsx)(a.z,{variant:"outline",onClick:t,children:"Atsijungti ir grįžti į prisijungimą"})]})]})})}},9733:function(t,e,r){"use strict";r.d(e,{d:function(){return u},z:function(){return c}});var n=r(7437),i=r(2265),a=r(1538),o=r(3027),s=r(9354);let u=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((t,e)=>{let{className:r,variant:i,size:o,asChild:c=!1,...d}=t,l=c?a.g7:"button";return(0,n.jsx)(l,{className:(0,s.cn)(u({variant:i,size:o,className:r})),ref:e,...d})});c.displayName="Button"},7786:function(t,e,r){"use strict";r.d(e,{AuthProvider:function(){return p},a:function(){return m}});var n=r(7437),i=r(2265),a=r(9506),o=r(5735),s=r(9842),u=r(2874),c=r(6763),d=r(6463),l=r(8087);let f=(0,i.createContext)(void 0),p=t=>{let{children:e}=t,[r,p]=(0,i.useState)(null),[m,y]=(0,i.useState)(!0),{toast:h}=(0,c.pm)(),g=(0,d.useRouter)();(0,i.useEffect)(()=>{let t=(0,o.Aj)(a.I8,async t=>{if(y(!0),t)try{await new Promise(t=>setTimeout(t,50));let e=await u.GA(t.uid);e?p(e):(console.warn("No Firestore profile found for authenticated user:",t.uid),await (0,o.w7)(a.I8),p(null))}catch(t){console.error("Error fetching user profile:",t),p(null)}else p(null);y(!1)});return()=>t()},[]);let v=async t=>{try{return(await (0,o.e5)(a.I8,t.email,t.password)).user}catch(t){throw console.error("Login failed:",t),h({title:"Prisijungimo klaida",description:t.message||"Patikrinkite el. paštą ir slaptažodį.",variant:"destructive"}),t}},b=async t=>{try{let e=(await (0,o.Xb)(a.I8,t.email,t.password)).user,r={email:t.email,companyName:t.companyName,companyCode:t.companyCode,vatCode:t.vatCode||"",address:t.address,contactPerson:t.contactPerson,phone:t.phone,paymentStatus:"pending_verification",isAdmin:!1,agreeToTerms:t.agreeToTerms,subUsers:[],registeredAt:(0,s.Bt)(),accountActivatedAt:null};await (0,s.pl)((0,s.JU)(a.db,"users",e.uid),r)}catch(t){throw console.error("Signup failed:",t),h({title:"Registracijos klaida",description:t.message||"Nepavyko užregistruoti vartotojo.",variant:"destructive"}),t}},w=async()=>{await (0,o.w7)(a.I8),p(null),g.push("/login")},x=async t=>{if(r)try{await u.Lj(r.id,t);let e={...r,...t};p(e)}catch(t){throw console.error("Failed to update user context and Firestore:",t),h({title:"Atnaujinimo klaida",description:"Nepavyko išsaugoti pakeitimų serveryje.",variant:"destructive"}),t}};return m?(0,n.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:(0,n.jsx)(l.Z,{className:"h-12 w-12 animate-spin text-primary"})}):(0,n.jsx)(f.Provider,{value:{user:r,loading:m,login:v,signup:b,logout:w,updateUserInContext:x},children:e})},m=()=>{let t=(0,i.useContext)(f);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},6763:function(t,e,r){"use strict";r.d(e,{pm:function(){return f}});var n=r(2265);let i=0,a=new Map,o=t=>{if(a.has(t))return;let e=setTimeout(()=>{a.delete(t),d({type:"REMOVE_TOAST",toastId:t})},1e6);a.set(t,e)},s=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:r}=e;return r?o(r):t.toasts.forEach(t=>{o(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===r||void 0===r?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},u=[],c={toasts:[]};function d(t){c=s(c,t),u.forEach(t=>{t(c)})}function l(t){let{...e}=t,r=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...e,id:r,open:!0,onOpenChange:t=>{t||n()}}}),{id:r,dismiss:n,update:t=>d({type:"UPDATE_TOAST",toast:{...t,id:r}})}}function f(){let[t,e]=n.useState(c);return n.useEffect(()=>(u.push(e),()=>{let t=u.indexOf(e);t>-1&&u.splice(t,1)}),[t]),{...t,toast:l,dismiss:t=>d({type:"DISMISS_TOAST",toastId:t})}}},9506:function(t,e,r){"use strict";let n,i;r.d(e,{I8:function(){return d},db:function(){return i},tO:function(){return l}});var a=r(5236),o=r(5735),s=r(9842),u=r(9854);let c="drivercheck";(0,a.C6)().length?(n=(0,a.Mq)(),i=(0,s.ad)(n,c)):(n=(0,a.ZF)({apiKey:"AIzaSyBusklRtrpm-gfnwCdmi2yj5vTumqLte3c",authDomain:"drivershield.firebaseapp.com",projectId:"drivershield",storageBucket:"drivershield.appspot.com",messagingSenderId:"688007961476",appId:"1:688007961476:web:0bf3aa76adba59f7781bd1",measurementId:"G-BKJYEF2X6Y"}),i=(0,s.LV)(n,{experimentalForceLongPolling:!0,localCache:{kind:"memory"}},c));let d=(0,o.v0)(n),l=(0,u.cF)(n)},2874:function(t,e,r){"use strict";r.d(e,{A5:function(){return p},AW:function(){return u},FA:function(){return g},GA:function(){return d},I1:function(){return l},KO:function(){return v},Lj:function(){return c},cq:function(){return f},hi:function(){return h},oK:function(){return y},tE:function(){return b},w2:function(){return m}});var n=r(9506),i=r(9842),a=r(9854);let o=t=>t&&"function"==typeof t.toDate,s=t=>{let e={...t},r={id:e.id};for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];o(n)?r[t]=n.toDate().toISOString():r[t]=n}return r};async function u(){let t=(0,i.hJ)(n.db,"users");return(await (0,i.PL)(t)).docs.map(t=>s({id:t.id,...t.data()}))}async function c(t,e){let r=(0,i.JU)(n.db,"users",t);await (0,i.r7)(r,e)}async function d(t){let e=(0,i.JU)(n.db,"users",t),r=await (0,i.QT)(e);return r.exists()?s({id:r.id,...r.data()}):null}async function l(){let t=(0,i.hJ)(n.db,"reports"),e=(0,i.IO)(t,(0,i.Xo)("createdAt","desc"));return(await (0,i.PL)(e)).docs.map(t=>s({id:t.id,...t.data()}))}async function f(t){let e=(0,i.hJ)(n.db,"reports"),r={...t,createdAt:(0,i.Bt)(),deletedAt:null};await (0,i.ET)(e,r)}async function p(t){let e=(0,i.JU)(n.db,"reports",t);await (0,i.r7)(e,{deletedAt:(0,i.Bt)()})}async function m(t){let e=(0,i.IO)((0,i.hJ)(n.db,"reports"),(0,i.ar)("reporterId","==",t),(0,i.Xo)("createdAt","desc")),r=(await (0,i.PL)(e)).docs.map(t=>s({id:t.id,...t.data()}));return{active:r.filter(t=>!t.deletedAt),deleted:r.filter(t=>!!t.deletedAt)}}async function y(t){if(!t)return[];let e=(0,i.IO)((0,i.hJ)(n.db,"searchLogs"),(0,i.ar)("userId","==",t),(0,i.Xo)("timestamp","desc"),(0,i.b9)(50));return(await (0,i.PL)(e)).docs.map(t=>s({id:t.id,...t.data()}))}async function h(t){let e={...t,timestamp:(0,i.Bt)()};await (0,i.ET)((0,i.hJ)(n.db,"searchLogs"),e)}async function g(){let t=(0,i.IO)((0,i.hJ)(n.db,"auditLogs"),(0,i.Xo)("timestamp","desc"),(0,i.b9)(100));return(await (0,i.PL)(t)).docs.map(t=>s({id:t.id,...t.data()}))}async function v(t){let e={...t,timestamp:(0,i.Bt)()};await (0,i.ET)((0,i.hJ)(n.db,"auditLogs"),e)}async function b(t){let e="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),r=t.name.split(".").pop(),i=(0,a.iH)(n.tO,"reports/".concat(e,".").concat(r));return await (0,a.KV)(i,t),{url:await (0,a.Jt)(i),dataAiHint:t.name.split(".")[0].replace(/[^a-zA-Z\s]/g,"").substring(0,20)||"document scan"}}},1538:function(t,e,r){"use strict";r.d(e,{Z8:function(){return d},g7:function(){return l}});var n,i=r(2265),a=r(1584),o=r(7437),s=Symbol.for("react.lazy"),u=(n||(n=r.t(i,2)))[" use ".trim().toString()];function c(t){var e;return null!=t&&"object"==typeof t&&"$$typeof"in t&&t.$$typeof===s&&"_payload"in t&&"object"==typeof(e=t._payload)&&null!==e&&"then"in e}function d(t){let e=function(t){let e=i.forwardRef((t,e)=>{let{children:r,...n}=t;if(c(r)&&"function"==typeof u&&(r=u(r._payload)),i.isValidElement(r)){var o;let t,s;let u=(o=r,(t=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning?o.ref:(t=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning?o.props.ref:o.props.ref||o.ref),c=function(t,e){let r={...e};for(let n in e){let i=t[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...t)=>{let e=a(...t);return i(...t),e}:i&&(r[n]=i):"style"===n?r[n]={...i,...a}:"className"===n&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}(n,r.props);return r.type!==i.Fragment&&(c.ref=e?(0,a.F)(e,u):u),i.cloneElement(r,c)}return i.Children.count(r)>1?i.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}(t),r=i.forwardRef((t,r)=>{let{children:n,...a}=t;c(n)&&"function"==typeof u&&(n=u(n._payload));let s=i.Children.toArray(n),d=s.find(p);if(d){let t=d.props.children,n=s.map(e=>e!==d?e:i.Children.count(t)>1?i.Children.only(null):i.isValidElement(t)?t.props.children:null);return(0,o.jsx)(e,{...a,ref:r,children:i.isValidElement(t)?i.cloneElement(t,void 0,n):null})}return(0,o.jsx)(e,{...a,ref:r,children:n})});return r.displayName=`${t}.Slot`,r}var l=d("Slot"),f=Symbol("radix.slottable");function p(t){return i.isValidElement(t)&&"function"==typeof t.type&&"__radixId"in t.type&&t.type.__radixId===f}}},function(t){t.O(0,[4358,139,6900,4623,9354,2971,7023,1744],function(){return t(t.s=5126)}),_N_E=t.O()}]);