(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7043,700],{8945:function(e,t,r){Promise.resolve().then(r.bind(r,403))},291:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return a}});let a=r(9920)._(r(2265)).default.createContext(null)},403:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(7437),s=r(2265),n=r(9343),i=r(1014),o=r(3751),l=r(7786),c=r(8185),d=r(3363),u=r(7209),m=r(9733),f=r(7835),p=r(8087);let h=(0,r(6497).Z)("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var x=r(9162),g=r(2874),y=r(9354),b=r(9055),v=r(6648),j=r(2686);function w(){let{t:e,locale:t}=(0,o.Z)(),{user:r}=(0,l.a)(),[w,N]=(0,s.useState)([]),[I,S]=(0,s.useState)(!1),[A,_]=(0,s.useState)(!1),[C,k]=(0,s.useState)(""),T=(0,n.cI)({resolver:(0,i.F)(x.Hi),defaultValues:{query:""}}),Z=async t=>{S(!0),_(!0),k(t.query);try{let a=await (0,g.I1)(),s=t.query.toLowerCase(),n=a.filter(t=>{if(t.deletedAt)return!1;let r=(0,y.Q)(t.category,e).toLowerCase(),a=t.tags.map(t=>e("tags.".concat(t)).toLowerCase());return t.fullName.toLowerCase().includes(s)||t.nationality&&e("countries.".concat(t.nationality)).toLowerCase().includes(s)||r.includes(s)||a.some(e=>e.includes(s))||t.comment.toLowerCase().includes(s)});N(n),r&&await (0,g.hi)({userId:r.id,searchText:t.query,resultsCount:n.length})}catch(e){console.error("Error during search:",e),N([])}finally{S(!1)}};return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(f.Z,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ll,{children:e("search.title")}),(0,a.jsx)(c.SZ,{children:e("search.description")})]})]})}),(0,a.jsxs)(c.aY,{children:[(0,a.jsx)(d.l0,{...T,children:(0,a.jsxs)("form",{onSubmit:T.handleSubmit(Z),className:"flex flex-col sm:flex-row items-start gap-4 mb-8",children:[(0,a.jsx)(d.Wi,{control:T.control,name:"query",render:t=>{let{field:r}=t;return(0,a.jsxs)(d.xJ,{className:"flex-grow w-full",children:[(0,a.jsx)(d.lX,{className:"sr-only",children:e("search.queryLabel")}),(0,a.jsx)(d.NI,{children:(0,a.jsx)(u.I,{placeholder:e("search.queryPlaceholder"),...r})}),(0,a.jsx)(d.zG,{})]})}}),(0,a.jsxs)(m.z,{type:"submit",disabled:I,className:"w-full sm:w-auto",children:[I?(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),e("search.searchButton")]})]})}),(0,a.jsxs)("div",{children:[I&&(0,a.jsxs)("div",{className:"text-center py-10",children:[(0,a.jsx)(p.Z,{className:"mx-auto h-12 w-12 animate-spin text-primary"}),(0,a.jsx)("p",{className:"mt-4 text-muted-foreground",children:e("search.loading")})]}),!I&&!A&&(0,a.jsx)("p",{className:"text-center text-muted-foreground py-10",children:e("search.initialMessage")}),!I&&A&&0===w.length&&(0,a.jsxs)("div",{className:"text-center py-10",children:[(0,a.jsx)(h,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,a.jsx)("p",{className:"mt-4 text-lg font-semibold",children:e("search.noResults.title")}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:e("search.noResults.message",{query:C})})]}),!I&&A&&w.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:e("search.results.title",{count:w.length})}),w.map(t=>(0,a.jsxs)(c.Zb,{className:"overflow-hidden ".concat(j.$I.includes(t.category)?"border-destructive/40":""),children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ll,{className:"text-2xl",children:t.fullName}),(0,a.jsxs)(c.SZ,{children:[t.nationality&&"".concat(e("countries.".concat(t.nationality))),t.nationality&&t.birthYear&&", ",t.birthYear&&"".concat(e("search.results.birthYearPrefix")).concat(t.birthYear)]})]}),(0,a.jsx)(b.C,{variant:j.$I.includes(t.category)?"destructive":"secondary",children:(0,y.Q)(t.category,e)})]})}),(0,a.jsxs)(c.aY,{className:"space-y-4",children:[t.tags&&t.tags.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-sm mb-1",children:e("search.results.tags")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map(t=>(0,a.jsx)(b.C,{variant:"outline",children:e("tags.".concat(t))},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-sm mb-1",children:e("search.results.comment")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.comment})]}),t.imageUrl&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-sm mb-2",children:e("search.results.attachedFile")}),(0,a.jsx)("div",{className:"relative h-64 w-full md:w-96 rounded-md overflow-hidden border",children:(0,a.jsx)(v.default,{src:t.imageUrl,alt:e("search.results.imageAlt",{fullName:t.fullName}),fill:!0,style:{objectFit:"cover"},"data-ai-hint":t.dataAiHint||""})})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground pt-4 border-t mt-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{children:[e("search.results.submittedBy"),": ",(0,a.jsx)("strong",{children:t.reporterCompanyName})]}),(0,a.jsxs)("span",{children:[e("search.results.date"),": ",(0,a.jsx)("strong",{children:new Date(t.createdAt).toLocaleDateString(e("common.localeForDate"))})]})]})})]})]},t.id))]})]})]})]})})}},9055:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(7437);r(2265);var s=r(3027),n=r(9354);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},9733:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var a=r(7437),s=r(2265),n=r(1538),i=r(3027),o=r(9354);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},8185:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var a=r(7437),s=r(2265),n=r(9354);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},3363:function(e,t,r){"use strict";r.d(t,{NI:function(){return x},Wi:function(){return u},l0:function(){return c},lX:function(){return h},pf:function(){return g},xJ:function(){return p},zG:function(){return y}});var a=r(7437),s=r(2265),n=r(1538),i=r(9343),o=r(9354),l=r(402);let c=i.RV,d=s.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(d.Provider,{value:{name:t.name},children:(0,a.jsx)(i.Qr,{...t})})},m=()=>{let e=s.useContext(d),t=s.useContext(f),{getFieldState:r,formState:a}=(0,i.Gc)(),n=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},f=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:r,...n}=e,i=s.useId();return(0,a.jsx)(f.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...n})})});p.displayName="FormItem";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:n,formItemId:i}=m();return(0,a.jsx)(l._,{ref:t,className:(0,o.cn)(n&&"text-destructive",r),htmlFor:i,...s})});h.displayName="FormLabel";let x=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:i,formDescriptionId:o,formMessageId:l}=m();return(0,a.jsx)(n.g7,{ref:t,id:i,"aria-describedby":s?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!s,...r})});x.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:n}=m();return(0,a.jsx)("p",{ref:t,id:n,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});g.displayName="FormDescription";let y=s.forwardRef((e,t)=>{var r;let{className:s,children:n,...i}=e,{error:l,formMessageId:c}=m(),d=l?String(null!==(r=null==l?void 0:l.message)&&void 0!==r?r:""):n;return d?(0,a.jsx)("p",{ref:t,id:c,className:(0,o.cn)("text-sm font-medium text-destructive",s),...i,children:d}):null});y.displayName="FormMessage"},7209:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),s=r(2265),n=r(9354);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},402:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var a=r(7437),s=r(2265),n=r(8837),i=r(3027),o=r(9354);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,o.cn)(l(),r),...s})});c.displayName=n.f.displayName},7786:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return f},a:function(){return p}});var a=r(7437),s=r(2265),n=r(9506),i=r(5735),o=r(9842),l=r(2874),c=r(6763),d=r(6463),u=r(8087);let m=(0,s.createContext)(void 0),f=e=>{let{children:t}=e,[r,f]=(0,s.useState)(null),[p,h]=(0,s.useState)(!0),{toast:x}=(0,c.pm)(),g=(0,d.useRouter)();(0,s.useEffect)(()=>{let e=(0,i.Aj)(n.I8,async e=>{if(h(!0),e)try{await new Promise(e=>setTimeout(e,50));let t=await l.GA(e.uid);t?f(t):(console.warn("No Firestore profile found for authenticated user:",e.uid),await (0,i.w7)(n.I8),f(null))}catch(e){console.error("Error fetching user profile:",e),f(null)}else f(null);h(!1)});return()=>e()},[]);let y=async e=>{try{return(await (0,i.e5)(n.I8,e.email,e.password)).user}catch(e){throw console.error("Login failed:",e),x({title:"Prisijungimo klaida",description:e.message||"Patikrinkite el. paštą ir slaptažodį.",variant:"destructive"}),e}},b=async e=>{try{let t=(await (0,i.Xb)(n.I8,e.email,e.password)).user,r={email:e.email,companyName:e.companyName,companyCode:e.companyCode,vatCode:e.vatCode||"",address:e.address,contactPerson:e.contactPerson,phone:e.phone,paymentStatus:"pending_verification",isAdmin:!1,agreeToTerms:e.agreeToTerms,subUsers:[],registeredAt:(0,o.Bt)(),accountActivatedAt:null};await (0,o.pl)((0,o.JU)(n.db,"users",t.uid),r)}catch(e){throw console.error("Signup failed:",e),x({title:"Registracijos klaida",description:e.message||"Nepavyko užregistruoti vartotojo.",variant:"destructive"}),e}},v=async()=>{await (0,i.w7)(n.I8),f(null),g.push("/login")},j=async e=>{if(r)try{await l.Lj(r.id,e);let t={...r,...e};f(t)}catch(e){throw console.error("Failed to update user context and Firestore:",e),x({title:"Atnaujinimo klaida",description:"Nepavyko išsaugoti pakeitimų serveryje.",variant:"destructive"}),e}};return p?(0,a.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:(0,a.jsx)(u.Z,{className:"h-12 w-12 animate-spin text-primary"})}):(0,a.jsx)(m.Provider,{value:{user:r,loading:p,login:y,signup:b,logout:v,updateUserInContext:j},children:t})},p=()=>{let e=(0,s.useContext)(m);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6763:function(e,t,r){"use strict";r.d(t,{pm:function(){return m}});var a=r(2265);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9506:function(e,t,r){"use strict";let a,s;r.d(t,{I8:function(){return d},db:function(){return s},tO:function(){return u}});var n=r(5236),i=r(5735),o=r(9842),l=r(9854);let c="drivercheck";(0,n.C6)().length?(a=(0,n.Mq)(),s=(0,o.ad)(a,c)):(a=(0,n.ZF)({apiKey:"AIzaSyBusklRtrpm-gfnwCdmi2yj5vTumqLte3c",authDomain:"drivershield.firebaseapp.com",projectId:"drivershield",storageBucket:"drivershield.appspot.com",messagingSenderId:"688007961476",appId:"1:688007961476:web:0bf3aa76adba59f7781bd1",measurementId:"G-BKJYEF2X6Y"}),s=(0,o.LV)(a,{experimentalForceLongPolling:!0,localCache:{kind:"memory"}},c));let d=(0,i.v0)(a),u=(0,l.cF)(a)},9162:function(e,t,r){"use strict";r.d(t,{Hi:function(){return o},ZO:function(){return i},fb:function(){return s},pj:function(){return n}});var a=r(537);let s=a.Ry({email:a.Z_().email({message:"Neteisingas el. pašto formatas."}),password:a.Z_().min(8,{message:"Slaptažodis turi būti bent 8 simbolių ilgio."}),confirmPassword:a.Z_().min(8,{message:"Slaptažodis turi būti bent 8 simbolių ilgio."}),companyName:a.Z_().min(2,{message:"Įmonės pavadinimas turi būti bent 2 simbolių ilgio."}),companyCode:a.Z_().regex(/^\d{9}$/,{message:"Įmonės kodas turi būti 9 skaitmenys."}),vatCode:a.Z_().optional(),address:a.Z_().min(5,{message:"Adresas turi būti bent 5 simbolių ilgio."}),contactPerson:a.Z_().min(3,{message:"Kontaktinis asmuo turi būti bent 3 simbolių ilgio."}),phone:a.Z_().regex(/^\+?\d{7,15}$/,{message:"Neteisingas telefono numerio formatas."}),agreeToTerms:a.O7().refine(e=>!0===e,{message:"Privalote sutikti su taisyklėmis."})}).refine(e=>e.password===e.confirmPassword,{message:"Slaptažodžiai nesutampa.",path:["confirmPassword"]}),n=a.Ry({email:a.Z_().email({message:"Neteisingas el. pašto formatas."}),password:a.Z_().min(1,{message:"Slaptažodis yra privalomas."})}),i=a.Ry({fullName:a.Z_().min(3,{message:"Vardas ir pavardė turi būti bent 3 simbolių ilgio."}),nationality:a.Z_().optional(),birthYear:a.Rx().int().min(1900).max(new Date().getFullYear()).optional().or(a.i0("")),category:a.Z_().min(1,{message:"Pagrindinė kategorija yra privaloma."}),tags:a.IX(a.Z_()).optional(),comment:a.Z_().min(10,{message:"Komentaras turi būti bent 10 simbolių ilgio."}),image:a.Yj().optional()}),o=a.Ry({query:a.Z_().min(3,{message:"Paieškos frazė turi būti bent 3 simbolių ilgio."})})},2874:function(e,t,r){"use strict";r.d(t,{A5:function(){return f},AW:function(){return l},FA:function(){return g},GA:function(){return d},I1:function(){return u},KO:function(){return y},Lj:function(){return c},cq:function(){return m},hi:function(){return x},oK:function(){return h},tE:function(){return b},w2:function(){return p}});var a=r(9506),s=r(9842),n=r(9854);let i=e=>e&&"function"==typeof e.toDate,o=e=>{let t={...e},r={id:t.id};for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e)){let a=t[e];i(a)?r[e]=a.toDate().toISOString():r[e]=a}return r};async function l(){let e=(0,s.hJ)(a.db,"users");return(await (0,s.PL)(e)).docs.map(e=>o({id:e.id,...e.data()}))}async function c(e,t){let r=(0,s.JU)(a.db,"users",e);await (0,s.r7)(r,t)}async function d(e){let t=(0,s.JU)(a.db,"users",e),r=await (0,s.QT)(t);return r.exists()?o({id:r.id,...r.data()}):null}async function u(){let e=(0,s.hJ)(a.db,"reports"),t=(0,s.IO)(e,(0,s.Xo)("createdAt","desc"));return(await (0,s.PL)(t)).docs.map(e=>o({id:e.id,...e.data()}))}async function m(e){let t=(0,s.hJ)(a.db,"reports"),r={...e,createdAt:(0,s.Bt)(),deletedAt:null};await (0,s.ET)(t,r)}async function f(e){let t=(0,s.JU)(a.db,"reports",e);await (0,s.r7)(t,{deletedAt:(0,s.Bt)()})}async function p(e){let t=(0,s.IO)((0,s.hJ)(a.db,"reports"),(0,s.ar)("reporterId","==",e),(0,s.Xo)("createdAt","desc")),r=(await (0,s.PL)(t)).docs.map(e=>o({id:e.id,...e.data()}));return{active:r.filter(e=>!e.deletedAt),deleted:r.filter(e=>!!e.deletedAt)}}async function h(e){if(!e)return[];let t=(0,s.IO)((0,s.hJ)(a.db,"searchLogs"),(0,s.ar)("userId","==",e),(0,s.Xo)("timestamp","desc"),(0,s.b9)(50));return(await (0,s.PL)(t)).docs.map(e=>o({id:e.id,...e.data()}))}async function x(e){let t={...e,timestamp:(0,s.Bt)()};await (0,s.ET)((0,s.hJ)(a.db,"searchLogs"),t)}async function g(){let e=(0,s.IO)((0,s.hJ)(a.db,"auditLogs"),(0,s.Xo)("timestamp","desc"),(0,s.b9)(100));return(await (0,s.PL)(e)).docs.map(e=>o({id:e.id,...e.data()}))}async function y(e){let t={...e,timestamp:(0,s.Bt)()};await (0,s.ET)((0,s.hJ)(a.db,"auditLogs"),t)}async function b(e){let t="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),r=e.name.split(".").pop(),s=(0,n.iH)(a.tO,"reports/".concat(t,".").concat(r));return await (0,n.KV)(s,e),{url:await (0,n.Jt)(s),dataAiHint:e.name.split(".")[0].replace(/[^a-zA-Z\s]/g,"").substring(0,20)||"document scan"}}},7835:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(6497).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},function(e){e.O(0,[4358,139,6900,4623,3318,6648,9354,3751,2971,7023,1744],function(){return e(e.s=8945)}),_N_E=e.O()}]);