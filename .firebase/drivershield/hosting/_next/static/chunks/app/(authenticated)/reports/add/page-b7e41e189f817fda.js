(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8951],{6957:function(e,r,t){Promise.resolve().then(t.bind(t,4299))},4299:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return X}});var a=t(7437),s=t(9343),i=t(1014),n=t(9162),l=t(9733),o=t(8185),d=t(3363),c=t(7209),m=t(2265),u=t(8362),f=t(186),p=t(6741),x=t(926),g=t(9354);let h=u.fC;u.ZA;let j=u.B4,b=m.forwardRef((e,r)=>{let{className:t,children:s,...i}=e;return(0,a.jsxs)(u.xz,{ref:r,className:(0,g.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[s,(0,a.jsx)(u.JO,{asChild:!0,children:(0,a.jsx)(f.Z,{className:"h-4 w-4 opacity-50"})})]})});b.displayName=u.xz.displayName;let N=m.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(u.u_,{ref:r,className:(0,g.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})});N.displayName=u.u_.displayName;let y=m.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(u.$G,{ref:r,className:(0,g.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})})});y.displayName=u.$G.displayName;let v=m.forwardRef((e,r)=>{let{className:t,children:s,position:i="popper",...n}=e;return(0,a.jsx)(u.h_,{children:(0,a.jsxs)(u.VY,{ref:r,className:(0,g.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,a.jsx)(N,{}),(0,a.jsx)(u.l_,{className:(0,g.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(y,{})]})})});v.displayName=u.VY.displayName,m.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(u.__,{ref:r,className:(0,g.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=u.__.displayName;let w=m.forwardRef((e,r)=>{let{className:t,children:s,...i}=e;return(0,a.jsxs)(u.ck,{ref:r,className:(0,g.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(u.wU,{children:(0,a.jsx)(x.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(u.eT,{children:s})]})});w.displayName=u.ck.displayName,m.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(u.Z0,{ref:r,className:(0,g.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=u.Z0.displayName;let Z=m.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("textarea",{className:(0,g.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s})});Z.displayName="Textarea";var C=t(4541),_=t(3751),k=t(7786),R=t(2686),I=t(2874),z=t(6763),F=t(6463),Y=t(6548),S=t(8087);function X(){let{t:e}=(0,_.Z)(),{user:r}=(0,k.a)(),{toast:t}=(0,z.pm)(),u=(0,F.useRouter)(),[f,p]=(0,m.useState)(!1),[x,N]=(0,m.useState)(""),[y,X]=(0,m.useState)(null),G=(0,s.cI)({resolver:(0,i.F)(n.ZO),defaultValues:{fullName:"",nationality:"",birthYear:void 0,category:"",tags:[],comment:"",image:null}});G.watch("comment");let W=(0,m.useMemo)(()=>{var e;return(null===(e=R.Kv.find(e=>e.id===x))||void 0===e?void 0:e.tags)||[]},[x]);(0,m.useEffect)(()=>{G.resetField("tags")},[x,G]);let J=async a=>{if(!r){t({variant:"destructive",title:e("reports.add.toast.notLoggedIn.title"),description:e("reports.add.toast.notLoggedIn.description")});return}p(!0);try{let s,i;if(y){let e=await (0,I.tE)(y);s=e.url,i=e.dataAiHint}let n={reporterId:r.id,reporterCompanyName:r.companyName,fullName:a.fullName,nationality:a.nationality,birthYear:a.birthYear?Number(a.birthYear):void 0,category:a.category,tags:a.tags||[],comment:a.comment,imageUrl:s,dataAiHint:i};await (0,I.cq)(n),t({title:e("reports.add.toast.success.title"),description:e("reports.add.toast.success.description",{fullName:a.fullName})}),u.push("/reports/history")}catch(e){console.error("Error submitting report:",e),t({variant:"destructive",title:"Klaida",description:"Nepavyko išsaugoti įrašo. Bandykite dar kartą."})}finally{p(!1)}};return(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(Y.Z,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ll,{children:e("reports.add.title")}),(0,a.jsx)(o.SZ,{children:e("reports.add.description")})]})]})}),(0,a.jsx)(o.aY,{children:(0,a.jsx)(d.l0,{...G,children:(0,a.jsxs)("form",{onSubmit:G.handleSubmit(J),className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(d.Wi,{control:G.control,name:"fullName",render:r=>{let{field:t}=r;return(0,a.jsxs)(d.xJ,{className:"md:col-span-1",children:[(0,a.jsx)(d.lX,{children:e("reports.add.form.fullName.label")}),(0,a.jsx)(d.NI,{children:(0,a.jsx)(c.I,{placeholder:e("reports.add.form.fullName.placeholder"),...t})}),(0,a.jsx)(d.zG,{})]})}}),(0,a.jsx)(d.Wi,{control:G.control,name:"nationality",render:r=>{let{field:t}=r;return(0,a.jsxs)(d.xJ,{className:"md:col-span-1",children:[(0,a.jsx)(d.lX,{children:e("reports.add.form.nationality.label")}),(0,a.jsxs)(h,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(d.NI,{children:(0,a.jsx)(b,{children:(0,a.jsx)(j,{placeholder:e("reports.add.form.nationality.placeholder")})})}),(0,a.jsx)(v,{children:R.hW.map(r=>(0,a.jsx)(w,{value:r.value,children:e("countries.".concat(r.value))},r.value))})]}),(0,a.jsx)(d.zG,{})]})}}),(0,a.jsx)(d.Wi,{control:G.control,name:"birthYear",render:r=>{let{field:t}=r;return(0,a.jsxs)(d.xJ,{className:"md:col-span-1",children:[(0,a.jsx)(d.lX,{children:e("reports.add.form.birthYear.label")}),(0,a.jsx)(d.NI,{children:(0,a.jsx)(c.I,{type:"number",placeholder:e("reports.add.form.birthYear.placeholder"),...t,onChange:e=>t.onChange(""===e.target.value?"":Number(e.target.value))})}),(0,a.jsx)(d.zG,{})]})}})]}),(0,a.jsx)(d.Wi,{control:G.control,name:"comment",render:r=>{let{field:t}=r;return(0,a.jsxs)(d.xJ,{children:[(0,a.jsx)(d.lX,{children:e("reports.add.form.comment.label")}),(0,a.jsx)(d.NI,{children:(0,a.jsx)(Z,{placeholder:e("reports.add.form.comment.placeholder"),className:"min-h-[120px]",...t})}),(0,a.jsx)(d.zG,{})]})}}),(0,a.jsx)(d.Wi,{control:G.control,name:"category",render:r=>{let{field:t}=r;return(0,a.jsxs)(d.xJ,{children:[(0,a.jsx)(d.lX,{children:e("reports.add.form.category.label")}),(0,a.jsxs)(h,{onValueChange:e=>{t.onChange(e),N(e)},value:t.value,children:[(0,a.jsx)(d.NI,{children:(0,a.jsx)(b,{children:(0,a.jsx)(j,{placeholder:e("reports.add.form.category.placeholder")})})}),(0,a.jsx)(v,{children:R.Kv.map(r=>(0,a.jsx)(w,{value:r.id,children:(0,g.Q)(r.id,e)},r.id))})]}),(0,a.jsx)(d.zG,{})]})}}),W.length>0&&(0,a.jsx)(d.Wi,{control:G.control,name:"tags",render:()=>(0,a.jsxs)(d.xJ,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)(d.lX,{children:e("reports.add.form.tags.label")}),(0,a.jsx)(d.pf,{children:e("reports.add.form.tags.description")})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:W.map(r=>(0,a.jsx)(d.Wi,{control:G.control,name:"tags",render:t=>{var s;let{field:i}=t;return(0,a.jsxs)(d.xJ,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,a.jsx)(d.NI,{children:(0,a.jsx)(C.X,{checked:null===(s=i.value)||void 0===s?void 0:s.includes(r),onCheckedChange:e=>{var t;return e?i.onChange([...i.value||[],r]):i.onChange(null===(t=i.value)||void 0===t?void 0:t.filter(e=>e!==r))}})}),(0,a.jsx)(d.lX,{className:"font-normal",children:e("tags.".concat(r))})]},r)}},r))}),(0,a.jsx)(d.zG,{})]})}),(0,a.jsx)(d.Wi,{control:G.control,name:"image",render:r=>{let{field:t}=r;return(0,a.jsxs)(d.xJ,{children:[(0,a.jsx)(d.lX,{children:e("reports.add.form.image.label")}),(0,a.jsx)(d.NI,{children:(0,a.jsx)(c.I,{type:"file",accept:"image/png, image/jpeg, application/pdf",onChange:e=>{var r;let a=(null===(r=e.target.files)||void 0===r?void 0:r[0])||null;t.onChange(a),X(a)}})}),(0,a.jsx)(d.pf,{children:e("reports.add.form.image.description")}),(0,a.jsx)(d.zG,{})]})}}),(0,a.jsxs)(l.z,{type:"submit",disabled:f,className:"w-full md:w-auto",children:[f&&(0,a.jsx)(S.Z,{className:"mr-2 h-4 w-4 animate-spin"}),e("reports.add.form.submitButton")]})]})})})]})}},8185:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},eW:function(){return m},ll:function(){return o}});var a=t(7437),s=t(2265),i=t(9354);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});n.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let m=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...s})});m.displayName="CardFooter"},4541:function(e,r,t){"use strict";t.d(r,{X:function(){return o}});var a=t(7437),s=t(2265),i=t(9324),n=t(926),l=t(9354);let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(i.fC,{ref:r,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:(0,a.jsx)(i.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})});o.displayName=i.fC.displayName},3363:function(e,r,t){"use strict";t.d(r,{NI:function(){return g},Wi:function(){return m},l0:function(){return d},lX:function(){return x},pf:function(){return h},xJ:function(){return p},zG:function(){return j}});var a=t(7437),s=t(2265),i=t(1538),n=t(9343),l=t(9354),o=t(402);let d=n.RV,c=s.createContext({}),m=e=>{let{...r}=e;return(0,a.jsx)(c.Provider,{value:{name:r.name},children:(0,a.jsx)(n.Qr,{...r})})},u=()=>{let e=s.useContext(c),r=s.useContext(f),{getFieldState:t,formState:a}=(0,n.Gc)(),i=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=r;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},f=s.createContext({}),p=s.forwardRef((e,r)=>{let{className:t,...i}=e,n=s.useId();return(0,a.jsx)(f.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:r,className:(0,l.cn)("space-y-2",t),...i})})});p.displayName="FormItem";let x=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:i,formItemId:n}=u();return(0,a.jsx)(o._,{ref:r,className:(0,l.cn)(i&&"text-destructive",t),htmlFor:n,...s})});x.displayName="FormLabel";let g=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:n,formDescriptionId:l,formMessageId:o}=u();return(0,a.jsx)(i.g7,{ref:r,id:n,"aria-describedby":s?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!s,...t})});g.displayName="FormControl";let h=s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:i}=u();return(0,a.jsx)("p",{ref:r,id:i,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});h.displayName="FormDescription";let j=s.forwardRef((e,r)=>{var t;let{className:s,children:i,...n}=e,{error:o,formMessageId:d}=u(),c=o?String(null!==(t=null==o?void 0:o.message)&&void 0!==t?t:""):i;return c?(0,a.jsx)("p",{ref:r,id:d,className:(0,l.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});j.displayName="FormMessage"},7209:function(e,r,t){"use strict";t.d(r,{I:function(){return n}});var a=t(7437),s=t(2265),i=t(9354);let n=s.forwardRef((e,r)=>{let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n})});n.displayName="Input"},402:function(e,r,t){"use strict";t.d(r,{_:function(){return d}});var a=t(7437),s=t(2265),i=t(8837),n=t(3027),l=t(9354);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(i.f,{ref:r,className:(0,l.cn)(o(),t),...s})});d.displayName=i.f.displayName},9162:function(e,r,t){"use strict";t.d(r,{Hi:function(){return l},ZO:function(){return n},fb:function(){return s},pj:function(){return i}});var a=t(537);let s=a.Ry({email:a.Z_().email({message:"Neteisingas el. pašto formatas."}),password:a.Z_().min(8,{message:"Slaptažodis turi būti bent 8 simbolių ilgio."}),confirmPassword:a.Z_().min(8,{message:"Slaptažodis turi būti bent 8 simbolių ilgio."}),companyName:a.Z_().min(2,{message:"Įmonės pavadinimas turi būti bent 2 simbolių ilgio."}),companyCode:a.Z_().regex(/^\d{9}$/,{message:"Įmonės kodas turi būti 9 skaitmenys."}),vatCode:a.Z_().optional(),address:a.Z_().min(5,{message:"Adresas turi būti bent 5 simbolių ilgio."}),contactPerson:a.Z_().min(3,{message:"Kontaktinis asmuo turi būti bent 3 simbolių ilgio."}),phone:a.Z_().regex(/^\+?\d{7,15}$/,{message:"Neteisingas telefono numerio formatas."}),agreeToTerms:a.O7().refine(e=>!0===e,{message:"Privalote sutikti su taisyklėmis."})}).refine(e=>e.password===e.confirmPassword,{message:"Slaptažodžiai nesutampa.",path:["confirmPassword"]}),i=a.Ry({email:a.Z_().email({message:"Neteisingas el. pašto formatas."}),password:a.Z_().min(1,{message:"Slaptažodis yra privalomas."})}),n=a.Ry({fullName:a.Z_().min(3,{message:"Vardas ir pavardė turi būti bent 3 simbolių ilgio."}),nationality:a.Z_().optional(),birthYear:a.Rx().int().min(1900).max(new Date().getFullYear()).optional().or(a.i0("")),category:a.Z_().min(1,{message:"Pagrindinė kategorija yra privaloma."}),tags:a.IX(a.Z_()).optional(),comment:a.Z_().min(10,{message:"Komentaras turi būti bent 10 simbolių ilgio."}),image:a.Yj().optional()}),l=a.Ry({query:a.Z_().min(3,{message:"Paieškos frazė turi būti bent 3 simbolių ilgio."})})}},function(e){e.O(0,[4358,139,6900,4623,1490,1542,3318,3956,8805,6210,9354,3751,700,2971,7023,1744],function(){return e(e.s=6957)}),_N_E=e.O()}]);